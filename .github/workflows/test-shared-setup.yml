name: Test Shared Setup Workflow

on:
  workflow_dispatch:
    inputs:
      hugo-version:
        description: 'Hugo version to test'
        required: false
        default: '0.148.1'
        type: string
      skip-asset-build:
        description: 'Skip asset building'
        required: false
        default: false
        type: boolean

jobs:
  test-shared-setup-default:
    name: Test with default parameters
    uses: ./.github/workflows/_shared-setup.yml

  test-shared-setup-custom:
    name: Test with custom parameters
    uses: ./.github/workflows/_shared-setup.yml
    with:
      hugo-version: ${{ inputs.hugo-version }}
      node-version: '20'
      skip-asset-build: ${{ inputs.skip-asset-build }}
      skip-theme-setup: false

  test-shared-setup-minimal:
    name: Test minimal setup (skip everything optional)
    uses: ./.github/workflows/_shared-setup.yml
    with:
      hugo-version: 'latest'
      skip-asset-build: true
      skip-theme-setup: true

  validate-setup-results:
    name: Validate Setup Results
    runs-on: ubuntu-latest
    needs: [test-shared-setup-default, test-shared-setup-custom, test-shared-setup-minimal]
    steps:
      - name: Validate test completion
        run: |
          echo "✅ All shared setup tests completed successfully"
          echo "- Default parameters test: completed"
          echo "- Custom parameters test: completed"  
          echo "- Minimal setup test: completed"
          echo ""
          echo "🔍 Shared setup workflow validation passed"